"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5537],{66513:function(n,t,e){e.d(t,{ft:function(){return tr},jF:function(){return ts},bm:function(){return tu},qg:function(){return ty},hb:function(){return tk},zo:function(){return ta},gw:function(){return to},A$:function(){return ti},P6:function(){return tp},Xx:function(){return tt},hw:function(){return tn},H8:function(){return te},U1:function(){return tb},BS:function(){return th},Jj:function(){return tm},b6:function(){return td},ZF:function(){return tl},QB:function(){return tf},nT:function(){return tv}});var r,o,a,i,u,s,c,l,d,p,m,f,v,y,D,h,k,b,S,w,U,g,Z,q,_,F,T=e(98788),A=e(70865),B=e(87394),$=e(45680),P=e(29493),I=e(79311),O=e(94370),V=e(5632),C=e(2784),J=e(92228),L=e(6647);e(27032);var W=e(10017),M=e.n(W);e(93586),e(75652),e(34519);var R=e(6022);e(93725),e(93324),e(84215);var N=e(6522),z=e(59913),j=function(n){return{type:N.i.MINT,hash:n.id.split("-")[0],timestamp:n.timestamp,sender:n.to,token0Symbol:n.pair.token0.symbol,token1Symbol:n.pair.token1.symbol,token0Address:n.pair.token0.id,token1Address:n.pair.token1.id,amountUSD:parseFloat(n.amountUSD),amountToken0:parseFloat(n.amount0),amountToken1:parseFloat(n.amount1)}},Y=function(n){return{type:N.i.BURN,hash:n.id.split("-")[0],timestamp:n.timestamp,sender:n.sender,token0Symbol:n.pair.token0.symbol,token1Symbol:n.pair.token1.symbol,token0Address:n.pair.token0.id,token1Address:n.pair.token1.id,amountUSD:parseFloat(n.amountUSD),amountToken0:parseFloat(n.amount0),amountToken1:parseFloat(n.amount1)}},x=function(n){return{type:N.i.SWAP,hash:n.id.split("-")[0],timestamp:n.timestamp,sender:n.from,token0Symbol:n.pair.token0.symbol,token1Symbol:n.pair.token1.symbol,token0Address:n.pair.token0.id,token1Address:n.pair.token1.id,amountUSD:parseFloat(n.amountUSD),amountToken0:parseFloat(n.amount0In)-parseFloat(n.amount0Out),amountToken1:parseFloat(n.amount1In)-parseFloat(n.amount1Out)}},E=function(n){return{date:n.date,volumeUSD:parseFloat(n.dailyVolumeUSD),liquidityUSD:parseFloat(n.totalLiquidityUSD)}},H=function(n){return{date:n.date,volumeUSD:parseFloat(n.dailyVolumeUSD),liquidityUSD:parseFloat(n.reserveUSD)}},Q=(r=(0,T.Z)(function(n,t){var e,r,o,a,i,u,s,c,l,d,p,m,f,v,y;return(0,$.__generator)(this,function(D){switch(D.label){case 0:e=[],r=!1,o=0,a=!1,D.label=1;case 1:if(!(!a&&!r))return[3,3];return[4,t(n,o)];case 2:return u=(i=D.sent()).data,s=i.error,o+=1e3,a=(null==u?void 0:u.length)<1e3||o>2e3,r=s,u&&(e=e.concat(u)),[3,1];case 3:if(r||0===e.length)return[2,{error:!0}];for(console.warn(c=M()(e.map(function(n){return[parseInt((n.date/R.Bq).toFixed(0)),n]}))),l=Object.keys(c).map(function(n){return parseInt(n,10)}),m=null!==(p=null==(d=c[l[0]])?void 0:d.date)&&void 0!==p?p:z.YM[n],v=null!==(f=null==d?void 0:d.liquidityUSD)&&void 0!==f?f:0,y=(0,P.Z)(new Date);m<y-R.Bq;){var h=parseInt(((m+=R.Bq)/R.Bq).toFixed(0),10);Object.keys(c).includes(h.toString())?v=c[h].liquidityUSD:c[h]={date:m,volumeUSD:0,liquidityUSD:v}}return[2,{data:Object.values(c),error:!1}]}})}),function(n,t){return r.apply(this,arguments)}),G=(o=(0,T.Z)(function(n,t,e){var r,o,a,i,u,s,c,l,d,p,m,f,v,y,D;return(0,$.__generator)(this,function(h){switch(h.label){case 0:r=[],o=!1,a=0,i=!1,h.label=1;case 1:if(!(!i&&!o))return[3,3];return[4,t(n,a,e)];case 2:return s=(u=h.sent()).data,c=u.error,a+=1e3,i=(null==s?void 0:s.length)<1e3||a>2e3,o=c,s&&(r=r.concat(s)),[3,1];case 3:if(o||0===r.length)return[2,{error:!0}];for(console.warn(l=M()(r.map(function(n){return[parseInt((n.date/R.Bq).toFixed(0)),n]}))),d=Object.keys(l).map(function(n){return parseInt(n,10)}),f=null!==(m=null==(p=l[d[0]])?void 0:p.date)&&void 0!==m?m:z.YM[n],y=null!==(v=null==p?void 0:p.liquidityUSD)&&void 0!==v?v:0,D=(0,P.Z)(new Date);f<D-R.Bq;){var k=parseInt(((f+=R.Bq)/R.Bq).toFixed(0),10);Object.keys(l).includes(k.toString())?y=l[k].liquidityUSD:l[k]={date:f,volumeUSD:0,liquidityUSD:y}}return[2,{data:Object.values(l),error:!1}]}})}),function(n,t,e){return o.apply(this,arguments)});function X(){var n=(0,J.Z)(["\n      query pairDayDatas($startTime: Int!, $skip: Int!, $address: Bytes!) {\n        pairDayDatas(\n          first: 1000\n          skip: $skip\n          where: { pairAddress: $address, date_gt: $startTime }\n          orderBy: date\n          orderDirection: asc\n        ) {\n          date\n          dailyVolumeUSD\n          reserveUSD\n        }\n      }\n    "]);return X=function(){return n},n}var K=(a=(0,T.Z)(function(n,t,e){var r;return(0,$.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),r=(0,L.gql)(X()),[4,(0,z.rf)(n).request(r,{startTime:z.YM[n],skip:t,address:e})];case 1:return[2,{data:o.sent().pairDayDatas.map(H),error:!1}];case 2:return console.error("Failed to fetch pool chart data",o.sent()),[2,{error:!0}];case 3:return[2]}})}),function(n,t,e){return a.apply(this,arguments)}),nn=(i=(0,T.Z)(function(n,t){return(0,$.__generator)(this,function(e){return[2,G(n,K,t)]})}),function(n,t){return i.apply(this,arguments)}),nt=e(96670),ne=e(91349),nr=function(n,t,e){var r=n*R.om,o=t*R.om,a=n*R.BY,i=t*R.BY,u=e>0?t*R.BY*R.MV*100/e:0;return{totalFees24h:r,totalFees7d:o,lpFees24h:a,lpFees7d:i,lpApr7d:u!==1/0?u:0}},no=e(55631),na=e(22062),ni=e(56246);function nu(){var n=(0,J.Z)(["\n      query topPools($blacklist: [String!]) {\n        pairDayDatas(\n          first: ","\n          ","\n          orderBy: dailyVolumeUSD\n          orderDirection: desc\n        ) {\n          id\n        }\n      }\n    "]);return nu=function(){return n},n}var ns=(u=(0,T.Z)(function(n,t){var e,r,o,a;return(0,$.__generator)(this,function(i){switch(i.label){case 0:r=(e=(0,z.J5)())?100:30,o="BSC"===n?"where: { dailyTxns_gt: 300, token0_not_in: $blacklist, token1_not_in: $blacklist, date_gt: ".concat(t," }"):"where: { date_gt: ".concat(t,", dailyVolumeUSD_gt: 500 }"),e&&(o="where: { date_gt: ".concat(t,"}")),i.label=1;case 1:return i.trys.push([1,3,,4]),a=(0,L.gql)(nu(),r,o),[4,(0,z.rf)(n).request(a,{blacklist:z.z2[n]})];case 2:return[2,i.sent().pairDayDatas.map(function(n){return n.id.split("-")[0]})];case 3:return console.error("Failed to fetch top pools",i.sent()),[2,[]];case 4:return[2]}})}),function(n,t){return u.apply(this,arguments)}),nc=(s=(0,T.Z)(function(n){return(0,$.__generator)(this,function(t){switch(t.label){case 0:return[4,ns(n,(0,B.Z)((0,ni.z)(),1)[0])];case 1:return[2,t.sent()]}})}),function(n){return s.apply(this,arguments)});function nl(){var n=(0,J.Z)(["\n      query pools {\n        now: ","\n        oneDayAgo: ","\n        twoDaysAgo: ","\n        oneWeekAgo: ","\n        twoWeeksAgo: ","\n      }\n    "]);return nl=function(){return n},n}var nd=function(n,t,e){var r='["'.concat(e.join('","'),'"]'),o=(0,z.J5)()?"volumeOutUSD":"";return"pairs(\n    where: { id_in: ".concat(r," }\n    ").concat(t?"block: {number: ".concat(t,"}"):"","\n    orderBy: trackedreserve").concat(z.WR[n],"\n    orderDirection: desc\n  ) {\n    id\n    reserve0\n    reserve1\n    reserveUSD\n    volumeUSD\n    ").concat(o,"\n    token0Price\n    token1Price\n    token0 {\n      id\n      symbol\n      name\n    }\n    token1 {\n      id\n      symbol\n      name\n    }\n  }")},np=(c=(0,T.Z)(function(n,t,e,r,o){var a,i,u=arguments;return(0,$.__generator)(this,function(s){switch(s.label){case 0:a=u.length>5&&void 0!==u[5]?u[5]:"ARB",s.label=1;case 1:return s.trys.push([1,3,,4]),i=(0,L.gql)(nl(),nd(a,null,o),nd(a,n,o),nd(a,t,o),nd(a,e,o),nd(a,r,o)),[4,(0,z.rf)(a).request(i)];case 2:return[2,{data:s.sent(),error:!1}];case 3:return console.error("Failed to fetch pool data",s.sent()),[2,{error:!0}];case 4:return[2]}})}),function(n,t,e,r,o){return c.apply(this,arguments)}),nm=function(n){return n?n.reduce(function(n,t){var e=t.volumeUSD,r=t.reserveUSD,o=t.reserve0,a=t.reserve1,i=t.token0Price,u=t.token1Price,s=t.volumeOutUSD;return n[t.id.toLowerCase()]=(0,nt.Z)((0,A.Z)({},t),{volumeUSD:parseFloat(e),volumeOutUSD:s&&parseFloat(s),reserveUSD:parseFloat(r),reserve0:parseFloat(o),reserve1:parseFloat(a),token0Price:parseFloat(i),token1Price:parseFloat(u)}),n},{}):{}},nf=(l=(0,T.Z)(function(n,t,e){var r,o,a,i,u,s,c,l,d,p,m;return(0,$.__generator)(this,function(f){switch(f.label){case 0:return o=(r=(0,B.Z)(null!=n?n:[],4))[0],a=r[1],i=r[2],u=r[3],[4,np(o.number,a.number,i.number,u.number,e,t)];case 1:return c=nm(null==(s=f.sent().data)?void 0:s.now),l=nm(null==s?void 0:s.oneDayAgo),d=nm(null==s?void 0:s.twoDaysAgo),p=nm(null==s?void 0:s.oneWeekAgo),m=nm(null==s?void 0:s.twoWeeksAgo),[2,e.reduce(function(n,t){var e=c[t],r=l[t],o=d[t],a=p[t],i=m[t],u=(0,B.Z)((0,ne.T)(null==e?void 0:e.volumeUSD,null==r?void 0:r.volumeUSD,null==o?void 0:o.volumeUSD),2),s=u[0],f=u[1],v=(null==e?void 0:e.volumeOutUSD)&&(0,na.D)(null==e?void 0:e.volumeOutUSD,null==r?void 0:r.volumeOutUSD),y=(null==e?void 0:e.volumeOutUSD)&&(0,na.D)(null==e?void 0:e.volumeOutUSD,null==a?void 0:a.volumeOutUSD),D=(0,B.Z)((0,ne.T)(null==e?void 0:e.volumeUSD,null==a?void 0:a.volumeUSD,null==i?void 0:i.volumeUSD),2),h=D[0],k=D[1],b=e?e.reserveUSD:0,S=(0,na.Y)(null==e?void 0:e.reserveUSD,null==r?void 0:r.reserveUSD),w=e?e.reserve0:0,U=e?e.reserve1:0,g=nr(s,h,b),Z=g.totalFees24h,q=g.totalFees7d,_=g.lpFees24h,F=g.lpFees7d,T=g.lpApr7d;return e&&(n[t]={data:{address:t,token0:{address:e.token0.id,name:e.token0.name,symbol:e.token0.symbol},token1:{address:e.token1.id,name:e.token1.name,symbol:e.token1.symbol},token0Price:e.token0Price,token1Price:e.token1Price,volumeUSD:s,volumeUSDChange:f,volumeUSDWeek:h,volumeUSDChangeWeek:k,totalFees24h:Z,totalFees7d:q,lpFees24h:_,lpFees7d:F,lpApr7d:T,liquidityUSD:b,liquidityUSDChange:S,liquidityToken0:w,liquidityToken1:U,volumeOutUSD:v,volumeOutUSDWeek:y}}),n},{})]}})}),function(n,t,e){return l.apply(this,arguments)}),nv=(d=(0,T.Z)(function(n,t){return(0,$.__generator)(this,function(e){switch(e.label){case 0:return[4,nc(t)];case 1:return[2,nf(n,t,e.sent())]}})}),function(n,t){return d.apply(this,arguments)}),ny=e(50930);function nD(){var n=(0,J.Z)(["\n  query poolTransactions($address: ID!) {\n    mints(first: 35, orderBy: timestamp, orderDirection: desc, where: { pair: $address }) {\n      id\n      timestamp\n      to\n      amount0\n      amount1\n      amountUSD\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n    }\n    swaps(first: 35, orderBy: timestamp, orderDirection: desc, where: { pair: $address }) {\n      id\n      timestamp\n      from\n      amount0In\n      amount1In\n      amount0Out\n      amount1Out\n      amountUSD\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n    }\n    burns(first: 35, orderBy: timestamp, orderDirection: desc, where: { pair: $address }) {\n      id\n      timestamp\n      sender\n      amount0\n      amount1\n      amountUSD\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n    }\n  }\n"]);return nD=function(){return n},n}var nh=(0,L.gql)(nD()),nk=(p=(0,T.Z)(function(n,t){var e,r,o,a,i;return(0,$.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,(0,z.rf)(n).request(nh,{address:t})];case 1:return r=(e=u.sent()).mints.map(j),o=e.burns.map(Y),a=e.swaps.map(x),[2,{data:(0,ny.Z)(r).concat((0,ny.Z)(o),(0,ny.Z)(a)),error:!1}];case 2:return i=u.sent(),console.error("Failed to fetch transactions for pool ".concat(t),i),[2,{error:!0}];case 3:return[2]}})}),function(n,t){return p.apply(this,arguments)});function nb(){var n=(0,J.Z)(["\n  query overviewCharts($startTime: Int!, $skip: Int!) {\n    pancakeDayDatas(first: 1000, skip: $skip, where: { date_gt: $startTime }, orderBy: date, orderDirection: asc) {\n      date\n      dailyVolumeUSD\n      totalLiquidityUSD\n    }\n  }\n"]);return nb=function(){return n},n}var nS=(0,L.gql)(nb()),nw=(m=(0,T.Z)(function(n,t){return(0,$.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,z.rf)(n).request(nS,{startTime:z.YM[n],skip:t})];case 1:return[2,{data:e.sent().pancakeDayDatas.map(E),error:!1}];case 2:return console.error("Failed to fetch overview chart data",e.sent()),[2,{error:!0}];case 3:return[2]}})}),function(n,t){return m.apply(this,arguments)}),nU=(f=(0,T.Z)(function(n){return(0,$.__generator)(this,function(t){switch(t.label){case 0:return[4,Q(n,nw)];case 1:return[2,t.sent().data]}})}),function(n){return f.apply(this,arguments)});function ng(){var n=(0,J.Z)(["query overview {\n      ","(\n        ","\n        first: 5) {\n        totalTransactions\n        totalVolumeUSD\n        totalLiquidityUSD\n      }\n    }"]);return ng=function(){return n},n}var nZ=(v=(0,T.Z)(function(n,t){var e,r;return(0,$.__generator)(this,function(o){switch(o.label){case 0:e=(0,z.J5)()?"factories":"pancakeFactories",o.label=1;case 1:return o.trys.push([1,3,,4]),r=(0,L.gql)(ng(),e,t?"block: { number: ".concat(t,"}"):""),[4,(0,z.rf)(n).request(r)];case 2:return[2,{data:o.sent(),error:!1}];case 3:return console.error("Failed to fetch info overview",o.sent()),[2,{data:null,error:!0}];case 4:return[2]}})}),function(n,t){return v.apply(this,arguments)}),nq=function(n){return n?n.reduce(function(n,t){return n.totalLiquidityUSD+=parseFloat(t.totalLiquidityUSD),n.totalTransactions+=parseFloat(t.totalTransactions),n.totalVolumeUSD+=parseFloat(t.totalVolumeUSD),n},{totalLiquidityUSD:0,totalTransactions:0,totalVolumeUSD:0}):null},n_=(y=(0,T.Z)(function(n,t,e){var r,o,a,i,u,s,c,l,d,p,m,f,v,y,D,h;return(0,$.__generator)(this,function(k){switch(k.label){case 0:return[4,Promise.all([nZ(n),nZ(n,null!==(r=null==t?void 0:t.number)&&void 0!==r?r:void 0),nZ(n,null!==(o=null==e?void 0:e.number)&&void 0!==o?o:void 0)])];case 1:return i=(a=B.Z.apply(void 0,[k.sent(),3]))[0].data,u=a[1].data,s=a[2].data,i.factories&&i.factories.length>0&&(i.pancakeFactories=i.factories),u.factories&&u.factories.length>0&&(u.pancakeFactories=u.factories),s.factories&&s.factories.length>0&&(s.pancakeFactories=s.factories),c=nq(null==i?void 0:i.pancakeFactories),l=nq(null==u?void 0:u.pancakeFactories),d=nq(null==s?void 0:s.pancakeFactories),m=(p=(0,B.Z)((0,ne.T)(c.totalVolumeUSD,l.totalVolumeUSD,d.totalVolumeUSD),2))[0],f=p[1],v=(0,na.Y)(c.totalLiquidityUSD,l.totalLiquidityUSD),D=(y=(0,B.Z)((0,ne.T)(c.totalTransactions,l.totalTransactions,d.totalTransactions),2))[0],h=y[1],[2,{volumeUSD:m,volumeUSDChange:"number"==typeof f?f:0,liquidityUSD:c.totalLiquidityUSD,liquidityUSDChange:v,txCount:D,txCountChange:h}]}})}),function(n,t,e){return y.apply(this,arguments)});function nF(){var n=(0,J.Z)(["\n  query overviewTransactions {\n    mints: mints(first: 33, orderBy: timestamp, orderDirection: desc) {\n      id\n      timestamp\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n      to\n      amount0\n      amount1\n      amountUSD\n    }\n    swaps: swaps(first: 33, orderBy: timestamp, orderDirection: desc) {\n      id\n      timestamp\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n      from\n      amount0In\n      amount1In\n      amount0Out\n      amount1Out\n      amountUSD\n    }\n    burns: burns(first: 33, orderBy: timestamp, orderDirection: desc) {\n      id\n      timestamp\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n      sender\n      amount0\n      amount1\n      amountUSD\n    }\n  }\n"]);return nF=function(){return n},n}var nT=(0,L.gql)(nF()),nA=(D=(0,T.Z)(function(n){var t,e,r,o;return(0,$.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,z.rf)(n).request(nT)];case 1:if(!(t=a.sent()))return[2,void 0];return e=t.mints.map(j),r=t.burns.map(Y),o=t.swaps.map(x),[2,(0,ny.Z)(e).concat((0,ny.Z)(r),(0,ny.Z)(o)).sort(function(n,t){return parseInt(t.timestamp,10)-parseInt(n.timestamp,10)})];case 2:return a.sent(),[2,void 0];case 3:return[2]}})}),function(n){return D.apply(this,arguments)});function nB(){var n=(0,J.Z)(["\n      query tokenDayDatas($startTime: Int!, $skip: Int!, $address: String!) {\n        tokenDayDatas(\n          first: 1000\n          skip: $skip\n          where: { token: $address, date_gt: $startTime }\n          orderBy: date\n          orderDirection: asc\n        ) {\n          date\n          dailyVolumeUSD\n          totalLiquidityUSD\n        }\n      }\n    "]);return nB=function(){return n},n}var n$=(h=(0,T.Z)(function(n,t,e){var r;return(0,$.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),r=(0,L.gql)(nB()),[4,(0,z.rf)(n).request(r,{startTime:z.YM[n],skip:t,address:e})];case 1:return[2,{data:o.sent().tokenDayDatas.map(E),error:!1}];case 2:return console.error("Failed to fetch token chart data",o.sent()),[2,{error:!0}];case 3:return[2]}})}),function(n,t,e){return h.apply(this,arguments)}),nP=(k=(0,T.Z)(function(n,t){return(0,$.__generator)(this,function(e){return[2,G(n,n$,t)]})}),function(n,t){return k.apply(this,arguments)});function nI(){var n=(0,J.Z)(["\n  query poolsForToken($address: String!, $blacklist: [String!]) {\n    asToken0: pairs(\n      first: 15\n      orderBy: trackedreserve","\n      orderDirection: desc\n      where: { totalTransactions_gt: ",", token0: $address, token1_not_in: $blacklist }\n    ) {\n      id\n    }\n    asToken1: pairs(\n      first: 15\n      orderBy: trackedreserve","\n      orderDirection: desc\n      where: { totalTransactions_gt: ",", token1: $address, token0_not_in: $blacklist }\n    ) {\n      id\n    }\n  }\n"]);return nI=function(){return n},n}var nO=function(n){var t="ETH"===n?1:100;return(0,L.gql)(nI(),z.WR[n],t,z.WR[n],t)},nV=(b=(0,T.Z)(function(n,t){var e,r;return(0,$.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(0,z.rf)(n).request(nO(n),{address:t,blacklist:R.tE})];case 1:return[2,{error:!1,addresses:(e=o.sent()).asToken0.concat(e.asToken1).map(function(n){return n.id}).map(function(n){return n.toLowerCase()})}];case 2:return r=o.sent(),console.error("Failed to fetch pools for token ".concat(t),r),[2,{error:!0}];case 3:return[2]}})}),function(n,t){return b.apply(this,arguments)}),nC=e(34498),nJ=e.n(nC),nL=e(49787),nW=e(28672);function nM(){var n=(0,J.Z)(["\n    query tokenPriceData {\n      ","\n    }\n  "]);return nM=function(){return n},n}var nR=function(n){return(0,L.gql)(nM(),n)},nN=(S=(0,T.Z)(function(n,t,e,r){var o,a,i,u,s,c,l,d,p,m,f,v,y,D;return(0,$.__generator)(this,function(h){switch(h.label){case 0:for(o=(0,P.Z)(new Date),a=[],i=r;i<=o;)a.push(i),i+=e;h.label=1;case 1:return h.trys.push([1,4,,5]),[4,(0,nL.z)(a,"asc",500,n)];case 2:if((c=null!==(s=null==(u=h.sent())?void 0:u.length)&&void 0!==s?s:0)>0&&"BSC"===n&&!(0,z.J5)()&&(l=u[c-1],u[c-1]={timestamp:l.timestamp,number:l.number-32}),!u||0===c)return console.error("Error fetching blocks for timestamps",a),[2,{error:!1}];return[4,(0,nW.L)(nR,u.map(function(e){return"\n      t".concat(e.timestamp,':token(id:"').concat(t,'", block: { number: ').concat(e.number," }) {\n        derived").concat(z.WR[n],"\n      }\n      b").concat(e.timestamp,': bundle(id:"1", block: { number: ').concat(e.number," }) {\n        ").concat(z.WR[n].toLowerCase(),"Price\n      }\n    ")}),(0,z.rf)(n),200)];case 3:if(console.warn("fetchTokenPriceData",{chainName:n,prices:d=h.sent()}),!d)return console.error("Price data failed to load"),[2,{error:!1}];for(p=[],m=z.WR[n],Object.keys(d).forEach(function(n){var t,e=n.split("t")[1];e&&p.push({timestamp:e,derivedBNB:(null===(t=d[n])||void 0===t?void 0:t["derived".concat(m)])?parseFloat(d[n]["derived".concat(m)]):0,priceUSD:0})}),console.warn("pricesPart1",p),Object.keys(d).forEach(function(n){var t=n.split("b")[1];if(t){var e=p.findIndex(function(n){return n.timestamp===t});if(e>=0){var r,o,a=p[e].derivedBNB;p[e].priceUSD=parseFloat(null!==(o=null===(r=d[n])||void 0===r?void 0:r["".concat(m.toLowerCase(),"Price")])&&void 0!==o?o:0)*a}}}),f=nJ()(p,function(n){return parseInt(n.timestamp,10)}),v=[],y=0;y<f.length-1;y++)v.push({time:parseFloat(f[y].timestamp),open:f[y].priceUSD,close:f[y+1].priceUSD,high:f[y+1].priceUSD,low:f[y].priceUSD});return[2,{data:v,error:!1}];case 4:return D=h.sent(),console.error("Failed to fetch price data for token ".concat(t),D),[2,{error:!0}];case 5:return[2]}})}),function(n,t,e,r){return S.apply(this,arguments)}),nz=e(26139),nj=e.n(nz);function nY(){var n=(0,J.Z)(["\n      query topTokens($blacklist: [ID!]) {\n        tokenDayDatas(\n          first: ","\n          ","\n          orderBy: dailyVolumeUSD\n          orderDirection: desc\n        ) {\n          id\n        }\n      }\n    "]);return nY=function(){return n},n}function nx(){var n=(0,J.Z)(["\n      query topTokens {\n        tokens(\n          first: ","\n          ","\n          orderBy: totalLiquidity\n          orderDirection: desc\n        ) {\n          id\n        }\n      }\n    "]);return nx=function(){return n},n}var nE=(w=(0,T.Z)(function(n,t){var e,r,o,a,i,u,s;return(0,$.__generator)(this,function(c){switch(c.label){case 0:e="ETH"===n?"where: { date_gt: ".concat(t,", dailyVolumeUSD_gt:2000 }"):(0,z.J5)()?"":"where: { dailyTxns_gt: 20, date_gt: ".concat(t,"}"),r=50,c.label=1;case 1:if(c.trys.push([1,5,,6]),o=(0,L.gql)(nY(),r,e),a=(0,L.gql)(nx(),r,e),!(0,z.J5)())return[3,3];return[4,(0,z.rf)(n).request(a)];case 2:return i=c.sent(),[2,nj()(i.tokens.map(function(n){return n.id}),z.tO[n])];case 3:return[4,(0,z.rf)(n).request(o,{blacklist:z.z2[n]})];case 4:return u=c.sent(),[2,nj()(u.tokenDayDatas.map(function(n){return n.id.split("-")[0]}),z.tO[n])];case 5:return s=c.sent(),console.warn("fetchTopTokens",{chainName:n,timestamp24hAgo:t}),console.error("Failed to fetch top tokens",s),[2,[]];case 6:return[2]}})}),function(n,t){return w.apply(this,arguments)}),nH=(U=(0,T.Z)(function(n){return(0,$.__generator)(this,function(t){switch(t.label){case 0:return[4,nE(n,(0,B.Z)((0,ni.z)(),1)[0])];case 1:return[2,t.sent()]}})}),function(n){return U.apply(this,arguments)});function nQ(){var n=(0,J.Z)(["\n      query tokens {\n        now: ","\n        oneDayAgo: ","\n        twoDaysAgo: ","\n        oneWeekAgo: ","\n        twoWeeksAgo: ","\n      }\n    "]);return nQ=function(){return n},n}var nG=function(n,t,e){var r='["'.concat(e.join('","'),'"]');return"tokens(\n      where: {id_in: ".concat(r,"}\n      ").concat(t?"block: {number: ".concat(t,"}"):"","\n      orderBy: tradeVolumeUSD\n      orderDirection: desc\n    ) {\n      id\n      symbol\n      name\n      decimals\n      derived").concat(z.WR[n],"\n      derivedUSD\n      tradeVolumeUSD\n      totalTransactions\n      totalLiquidity\n    }\n  ")},nX=(g=(0,T.Z)(function(n,t,e,r,o,a){var i;return(0,$.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),i=(0,L.gql)(nQ(),nG(n,null,a),nG(n,t,a),nG(n,e,a),nG(n,r,a),nG(n,o,a)),[4,(0,z.rf)(n).request(i)];case 1:return[2,{data:u.sent(),error:!1}];case 2:return console.error("Failed to fetch token data",u.sent()),[2,{error:!0}];case 3:return[2]}})}),function(n,t,e,r,o,a){return g.apply(this,arguments)}),nK=function(n){return n?n.reduce(function(n,t){var e=t.derivedBNB,r=t.derivedUSD,o=t.tradeVolumeUSD,a=t.totalTransactions,i=t.totalLiquidity,u=t.derivedETH,s=t.decimals;return n[t.id.toLowerCase()]=(0,nt.Z)((0,A.Z)({},t),{derivedBNB:e?0:parseFloat(e),derivedETH:u?0:parseFloat(u),derivedUSD:parseFloat(r),tradeVolumeUSD:parseFloat(o),totalTransactions:parseFloat(a),totalLiquidity:parseFloat(i),decimals:parseInt(s)}),n},{}):{}},n0=(Z=(0,T.Z)(function(n,t,e){var r,o,a,i,u,s,c,l,d,p,m;return(0,$.__generator)(this,function(f){switch(f.label){case 0:return o=(r=(0,B.Z)(null!=t?t:[],4))[0],a=r[1],i=r[2],u=r[3],[4,nX(n,o.number,a.number,i.number,u.number,e)];case 1:return c=nK(null==(s=f.sent().data)?void 0:s.now),l=nK(null==s?void 0:s.oneDayAgo),d=nK(null==s?void 0:s.twoDaysAgo),p=nK(null==s?void 0:s.oneWeekAgo),m=nK(null==s?void 0:s.twoWeeksAgo),[2,e.reduce(function(n,t){var e=c[t],r=l[t],o=d[t],a=p[t],i=m[t],u=(0,B.Z)((0,ne.T)(null==e?void 0:e.tradeVolumeUSD,null==r?void 0:r.tradeVolumeUSD,null==o?void 0:o.tradeVolumeUSD),2),s=u[0],f=u[1],v=(0,B.Z)((0,ne.T)(null==e?void 0:e.tradeVolumeUSD,null==a?void 0:a.tradeVolumeUSD,null==i?void 0:i.tradeVolumeUSD),1)[0],y=e?e.totalLiquidity*e.derivedUSD:0,D=r?r.totalLiquidity*r.derivedUSD:0,h=(0,na.Y)(y,D),k=e?e.totalLiquidity:0,b=e?e.derivedUSD:0,S=e?e.decimals:0,w=r?r.derivedUSD:0,U=a?a.derivedUSD:0,g=(0,na.Y)(b,w),Z=(0,na.Y)(b,U),q=(0,na.D)(null==e?void 0:e.totalTransactions,null==r?void 0:r.totalTransactions);return n[t]={data:{exists:!!e,address:t,name:e?e.name:"",symbol:e?e.symbol:"",volumeUSD:s,volumeUSDChange:f,volumeUSDWeek:v,txCount:q,liquidityUSD:y,liquidityUSDChange:h,liquidityToken:k,priceUSD:b,priceUSDChange:g,priceUSDChangeWeek:Z,decimals:S}},n},{})]}})}),function(n,t,e){return Z.apply(this,arguments)}),n1=(q=(0,T.Z)(function(n,t){return(0,$.__generator)(this,function(e){switch(e.label){case 0:return[4,nH(n)];case 1:return[4,n0(n,t,e.sent())];case 2:return[2,e.sent()]}})}),function(n,t){return q.apply(this,arguments)});function n2(){var n=(0,J.Z)(["\n    query tokenTransactions($address: String!) {\n      mintsAs0: mints(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        to\n        amount0\n        amount1\n        amountUSD\n      }\n      mintsAs1: mints(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        to\n        amount0\n        amount1\n        amountUSD\n      }\n      swapsAs0: swaps(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        from\n        amount0In\n        amount1In\n        amount0Out\n        amount1Out\n        amountUSD\n      }\n      swapsAs1: swaps(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        from\n        amount0In\n        amount1In\n        amount0Out\n        amount1Out\n        amountUSD\n      }\n      burnsAs0: burns(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        sender\n        amount0\n        amount1\n        amountUSD\n      }\n      burnsAs1: burns(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        sender\n        amount0\n        amount1\n        amountUSD\n      }\n    }\n  "]);return n2=function(){return n},n}var n3=function(){var n=(0,z.J5)(),t=n?"pair_: {token0: $address}":"token0: $address",e=n?"pair_: {token1: $address}":"token1: $address";return(0,L.gql)(n2(),t,e,t,e,t,e)},n4=(_=(0,T.Z)(function(n,t){var e,r,o,a,i,u,s,c;return(0,$.__generator)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(0,z.rf)(n).request(n3(),{address:t})];case 1:return r=(e=l.sent()).mintsAs0.map(j),o=e.mintsAs1.map(j),a=e.burnsAs0.map(Y),i=e.burnsAs1.map(Y),u=e.swapsAs0.map(x),s=e.swapsAs1.map(x),[2,{data:(0,ny.Z)(r).concat((0,ny.Z)(o),(0,ny.Z)(a),(0,ny.Z)(i),(0,ny.Z)(u),(0,ny.Z)(s)),error:!1}];case 2:return c=l.sent(),console.error("Failed to fetch transactions for token ".concat(t),c),[2,{error:!0}];case 3:return[2]}})}),function(n,t){return _.apply(this,arguments)}),n5=e(2303),n6=e(64396),n9=e(15498),n7={errorRetryCount:3,errorRetryInterval:3e3},n8=(0,A.Z)({refreshInterval:15e3,keepPreviousData:!0},n7),tn=function(){var n=ty(),t=(0,B.Z)((0,ni.z)(),2),e=t[0],r=t[1],o=(0,no.T)([e,r]).blocks,a=(0,B.Z)(null!=o?o:[],2),i=a[0],u=a[1],s=(0,z.J5)()?"stableSwap":"swap",c=(0,n5.Z)(n&&i&&u?["info/protocol/updateProtocolData/".concat(s),n]:null,function(){return n_(n,i,u)},n7).data;return null!=c?c:void 0},tt=function(){var n=ty(),t=(0,z.J5)()?"stableSwap":"swap",e=(0,n5.Z)(["info/protocol/updateProtocolChartData/".concat(t),n],function(){return nU(n)},n7).data;return null!=e?e:void 0},te=function(){var n=ty(),t=(0,z.J5)()?"stableSwap":"swap",e=(0,n5.Z)(["info/protocol/updateProtocolTransactionsData/".concat(t),n],function(){return nA(n)},n8).data;return null!=e?e:void 0},tr=function(){var n=ty(),t=(0,B.Z)((0,ni.z)(),4),e=t[0],r=t[1],o=t[2],a=t[3],i=(0,no.T)([e,r,o,a]).blocks,u=(0,z.J5)()?"stableSwap":"swap",s=(0,n5.Z)(i&&n&&["info/pools/data/".concat(u),n],function(){return nv(i,n)},n7).data;return(0,C.useMemo)(function(){return null!=s?s:{}},[s])},to=function(n){var t=n.join(""),e=ty(),r=(0,B.Z)((0,ni.z)(),4),o=r[0],a=r[1],i=r[2],u=r[3],s=(0,no.T)([o,a,i,u]).blocks,c=(0,z.J5)()?"stableSwap":"swap",l=(0,n5.Z)(s&&e&&["info/pool/data/".concat(t,"/").concat(c),e],function(){return nf(s,e,n)},n8).data;return(0,C.useMemo)(function(){return n.map(function(n){var t;return null==l?void 0:null===(t=l[n])||void 0===t?void 0:t.data}).filter(function(n){return n})},[l,n])},ta=function(n){var t,e=ty(),r=(0,z.J5)()?"stableSwap":"swap",o=(0,n5.Z)(["info/pool/chartData/".concat(n,"/").concat(r),e],function(){return nn(e,n)},n7).data;return null!==(t=null==o?void 0:o.data)&&void 0!==t?t:void 0},ti=function(n){var t,e=ty(),r=(0,z.J5)()?"stableSwap":"swap",o=(0,n5.Z)(["info/pool/transactionsData/".concat(n,"/").concat(r),e],function(){return nk(e,n)},n8).data;return null!==(t=null==o?void 0:o.data)&&void 0!==t?t:void 0},tu=function(){var n=ty(),t=(0,B.Z)((0,ni.z)(),4),e=t[0],r=t[1],o=t[2],a=t[3],i=(0,no.T)([e,r,o,a]).blocks,u=(0,z.J5)()?"stableSwap":"swap",s=(0,n5.Z)(i&&n&&["info/token/data/".concat(u),n],function(){return n1(n,i)},n7),c=s.data,l=s.isLoading,d=(0,C.useMemo)(function(){return c?Object.keys(c).map(function(n){var t;return null==c?void 0:null===(t=c[n])||void 0===t?void 0:t.data}).filter(function(n){return n&&n.exists}):[]},[c]);return(0,C.useMemo)(function(){return l?[]:null!=d?d:[]},[l,d])},ts=function(){var n=ty(),t=(0,B.Z)((0,ni.z)(),4),e=t[0],r=t[1],o=t[2],a=t[3],i=(0,no.T)([e,r,o,a]).blocks,u=(0,z.J5)()?"stableSwap":"swap",s=(0,n5.Z)(i&&n&&["info/token/data/".concat(u),n],function(){return n1(n,i)},n7).data;return null!=s?s:{}},tc=function(n,t,e){for(var r=Math.ceil(n.length/50),o=[],a=0;a<r;a++)o.push(n.slice(50*a,(a+1)*50));return Promise.all(o.map(function(n){return n0(t,e,n)}))},tl=function(n){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],e=n.join(""),r=ty(),o=(0,B.Z)((0,ni.z)(),4),a=o[0],i=o[1],u=o[2],s=o[3],c=(0,no.T)([a,i,u,s]).blocks,l=(0,z.J5)()?"stableSwap":"swap",d=(0,n5.Z)(c&&r&&["info/token/data/".concat(e,"/").concat(l),r],function(){return tc(n,r,c)},t?n8:n7),p=d.data,m=d.isLoading;console.log({data:p});var f=(0,C.useMemo)(function(){return p&&p.length>0?p.reduce(function(n,t){return(0,A.Z)({},n,t)},{}):{}},[p]),v=(0,C.useMemo)(function(){if(n||!f)return n.map(function(n){var t;return null==f?void 0:null===(t=f[n])||void 0===t?void 0:t.data}).filter(function(n){return n&&n.exists})},[n,f]);return(0,C.useMemo)(function(){return m?[]:null!=v?v:void 0},[m,v])},td=function(n){var t;return null!==(t=tl([n]).find(function(t){return t.address===n}))&&void 0!==t?t:void 0},tp=function(n){var t,e=ty(),r=(0,z.J5)()?"stableSwap":"swap",o=(0,n5.Z)(["info/token/poolAddress/".concat(n,"/").concat(r),e],function(){return nV(e,n)},n7).data;return null!==(t=null==o?void 0:o.addresses)&&void 0!==t?t:void 0},tm=function(n){var t,e=ty(),r=(0,z.J5)()?"stableSwap":"swap",o=(0,n5.Z)(n&&e&&["info/token/chartData/".concat(n,"/").concat(r),e],function(){return nP(e,n)},n8).data;return null!==(t=null==o?void 0:o.data)&&void 0!==t?t:void 0},tf=function(n,t,e){var r,o=1e3*(0,P.Z)(new Date),a=(0,P.Z)((0,I.Z)((0,O.Z)(o,e))),i=ty(),u=(0,z.J5)()?"stableSwap":"swap",s=(0,n5.Z)(["info/token/priceData/".concat(n,"/").concat(u),i],function(){return nN(i,n,t,a)},n8).data;return null!==(r=null==s?void 0:s.data)&&void 0!==r?r:void 0},tv=function(n){var t,e=ty(),r=(0,z.J5)()?"stableSwap":"swap",o=(0,n5.Z)(["info/token/transactionsData/".concat(n,"/").concat(r),e],function(){return n4(e,n)},n8).data;return null!==(t=null==o?void 0:o.data)&&void 0!==t?t:void 0},ty=function(){var n=(0,V.useRouter)(),t=n.pathname,e=n.query,r=(0,n9.g)().chainId,o=(0,C.useCallback)(function(){return t.includes("eth")||"eth"===e.chain||1===r?"ETH":t.includes("arb")||"arb"===e.chain||42161===r?"ARB":t.includes("cro")||"cro"===e.chain||25===r?"CRO":t.includes("bsc")||"bsc"===e.chain||56===r?"BSC":"ARB"},[t,e,r]),a=(0,B.Z)((0,C.useState)(function(){return o()}),2),i=a[0],u=a[1],s=(0,C.useMemo)(function(){return i},[i]);return(0,C.useEffect)(function(){u(o())},[o]),s},tD=(F=(0,T.Z)(function(n){return(0,$.__generator)(this,function(t){return[2,Promise.all(n.map(function(n){return(0,n6.J)(n)}))]})}),function(n){return F.apply(this,arguments)}),th=function(n){var t=(0,z.J5)(),e=ty(),r=(0,n5.Z)(t&&(null==n?void 0:n.length)>0&&["info/pool/stableAPRs/Addresses/",e],function(){return tD(n)},n7).data,o=(0,C.useMemo)(function(){var t={};return null==r||r.forEach(function(e,r){t[n[r]]=null==e?void 0:e.toNumber()}),t},[n,r]);return(0,C.useMemo)(function(){return t?o:{}},[t,o])},tk=function(){var n=(0,V.useRouter)().query.chainName;return n?"/".concat(n):""},tb=function(){return(0,z.J5)()?"?type=stableSwap":""}},6522:function(n,t,e){var r,o;e.d(t,{i:function(){return r}}),(o=r||(r={}))[o.SWAP=0]="SWAP",o[o.MINT=1]="MINT",o[o.BURN=2]="BURN"},64396:function(n,t,e){e.d(t,{J:function(){return D}});var r,o=e(98788),a=e(87394),i=e(92228),u=e(45680),s=e(6391),c=e.n(s),l=e(6647),d=e(53982),p=e.n(d),m=e(56246),f=e(49787),v=e(22648);function y(){var n=(0,i.Z)(["\n        query virtualPriceStableSwap($stableSwapAddress: String, $blockDayAgo: Int!) {\n          virtualPriceAtLatestBlock: pair(id: $stableSwapAddress) {\n            virtualPrice\n          }\n          virtualPriceOneDayAgo: pair(id: $stableSwapAddress, block: { number: $blockDayAgo }) {\n            virtualPrice\n          }\n        }\n      "]);return y=function(){return n},n}var D=(r=(0,o.Z)(function(n){var t,e,r,o,i,s,d,D,h,k;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),t=(0,a.Z)((0,m.z)(),3)[2],[4,(0,f.z)([t])];case 1:return e=a.Z.apply(void 0,[u.sent(),1])[0],[4,v.Wt.request((0,l.gql)(y()),{stableSwapAddress:p()(n),blockDayAgo:e.number})];case 2:if(o=(r=u.sent()).virtualPriceAtLatestBlock,i=r.virtualPriceOneDayAgo,s=null==o?void 0:o.virtualPrice,d=null==i?void 0:i.virtualPrice,D=new(c())(s),h=new(c())(d),(k=D.minus(h).div(D).plus(1).pow(52).minus(1).times(100)).isFinite()&&k.isGreaterThan(0))return[2,k];return[2,new(c())(0)];case 3:return console.error(u.sent(),"[LP APR Update] getAprsForStableFarm error"),[3,4];case 4:return[2,new(c())("0")]}})}),function(n){return r.apply(this,arguments)})},91349:function(n,t,e){e.d(t,{T:function(){return o}});var r=e(22062),o=function(n,t,e){var o=(0,r.D)(n,t),a=(0,r.D)(t,e),i=(0,r.Y)(o,a);return[o,i]}},56246:function(n,t,e){e.d(t,{z:function(){return u}});var r=e(29493),o=e(93035),a=e(96913),i=e(65032),u=function(){var n=1e3*(0,r.Z)(new Date);return[(0,r.Z)((0,o.Z)((0,a.default)(n,1))),(0,r.Z)((0,o.Z)((0,a.default)(n,2))),(0,r.Z)((0,o.Z)((0,i.default)(n,1))),(0,r.Z)((0,o.Z)((0,i.default)(n,2)))]}},55631:function(n,t,e){e.d(t,{T:function(){return s}}),e(2784);var r=e(66513),o=e(59913),a=e(2303),i=e(15498),u=e(49787),s=function(n){var t,e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,l=(0,i.g)().chainId,d=(0,r.qg)(),p=JSON.stringify(n),m=JSON.parse(p);return{blocks:(0,a.Z)(["info/blocks/".concat(p,"/").concat(l),null!==(t=o.VQ[l])&&void 0!==t?t:d],function(){return(0,u.z)(m,s,c,null!==(e=o.VQ[l])&&void 0!==e?e:d)}).data}}},22062:function(n,t,e){e.d(t,{D:function(){return r},Y:function(){return o}});var r=function(n,t){return n&&t?n-t:n||0},o=function(n,t){return n&&t?(n-t)/t*100:0}}}]);
//# sourceMappingURL=5537-319c2367fb6db5fa.js.map